# 分析CFG G1[S]:    S->AB|A|B   A->aAb|a   B->cBd|d  和CFG G2[S]:      S->AB|A|B   A->aAb|e   B->cBd|e  论证：G1是SLR(1)文法而G2不是任何LR文法。  

王贤义                                          320210931221                                                      计算机基地班

### （1）分析文法的结构和产生的语言；构造识别文法活前缀的DFA（或LR(0)项目集规范族）；分析DFA（或项目集规范族）中是否存在某些状态包含冲突项目，冲突能否用SLR方法解决（若能，则表明该文法是SLR(1)文法；否则，该文法不是SLR(1)文法）；对文法不是LR文法的说明和简单的原因分析。

#### CFG G1[S]:    S->AB|A|B   A->aAb|a   B->cBd|d 

##### 分析文法的结构和产生的语言：

文法非终结符集：**{S,A,B}**

文法终结符集：**{a,b,c,d}**

文法产生的语言:a,b,c,d组成的字符串

##### 构建识别文法活前缀的DFA（该文法不需要拓展）：

![G1](D:\code\Compile\G1.png)

##### 分析DFA：

图中$I_1$和$I_3$项存在**移进——规约**冲突：

- $I_1$  FOLLOW(S)={#}

  ​	  由FOLLOW(S)$\cap${c,d}=$\empty$

- $I_3$ FOLLOW(A)={c,b,d,#}

  ​	  由FOLLOW(A)$\cap${a}=$\empty$


故以上冲突可以使用SLR方法解决，**故G1[S]是SLR(1)文法**

---

#### CFG G2[S]:      S->AB|A|B   A->aAb|e   B->cBd|e

##### 分析文法的结构和产生的语言：

文法非终结符集：**{s,A,B}**

文法终结符集：**{a,b,c,d,e}**

文法产生的语言为a,b,c,d,e组成的字符串

##### 构建识别文法活前缀的DFA（该文法不需要拓展）：

![G2](D:\code\Compile\G2.png)

##### 分析DFA：

图中对$I_4$存在**规约——规约**冲突：

由FOLLOW(A)={c,b,d,#},FOLLOW(B)={d,#}

​	FOLLOW(A)$\cap$FOLLOW(B)={d,#}$\ne \empty$

故以上冲突不可以使用SLR方法解决，**故G2[S]不是SLR(1)文法**

---

##### 当输入串为**e**时，该文法可生成两颗文法树

![二义](D:\code\Compile\二义.png)

故该文法具有**二义性**。

根据已经证明的结论：**任何二义文法都不是LR文法，因而也决不是SLR或LALR文法。**  

故该文法**不是任何LR文法**。

### （2）若有必要，可构造相应的LR分析表并用于分析某些特定句子，从而更加清晰明确地说明问题、证明结论。

![G1](D:\code\Compile\G1.png)

##### 对G1[S]文法编序：

(1)S->AB

(2)S->A

(3)S->B

(4)A->aAb

(5)A->a

(6)B->cBd

(7)B->d

##### 对G1[S]构造相应分析表：

| 状态 |  a   |  b   |  c   |  d   |  #   |  A   |  B   |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
|  0   |  s3  |      |  s4  |  s5  |      |  1   |  2   |
|  1   |      |      |  s4  |  s5  | acc  |      |  6   |
|  2   |      |      |      |      | acc  |      |      |
|  3   |  s3  |  r5  |  r5  |  r5  |  r5  |  7   |      |
|  4   |      |      |  s4  |  s5  |      |      |  8   |
|  5   |      |      |      |  r7  |  r7  |  6   |      |
|  6   |      |      |      |      | acc  |      |      |
|  7   |      |  s9  |      |      |      |      |      |
|  8   |      |      |      | s10  |      |      |      |
|  9   |      |  r4  |  r4  |  r4  |  r4  |      |      |
|  10  |      |      |      |  r6  |  r6  |      |      |

使用**G1[S]**分析**aabcdd**,匹配过程如下:

| 状态栈     | 文法符号栈 | 输入串  | 查表                        | 操作         |
| ---------- | ---------- | ------- | --------------------------- | ------------ |
| 0          | #          | aabcdd# | Action[0,a]=s3              | 移进a        |
| 0 3        | #a         | abcdd#  | Action[3,a]=s3              | 已经a        |
| 0 3 3      | #aa        | bcdd#   | Action[3,b]=r5,Goto(3,A)=7  | 用A->a规约   |
| 0 3 7      | #aA        | bcdd#   | Action[7,b]=s9              | 移进b        |
| 0 3 7 9    | #aAb       | cdd#    | Action[9,c]=r4,Goto(0,A)=1  | 用A->aAb规约 |
| 0 1        | #A         | cdd#    | Action[1,c]=s4              | 移进c        |
| 0 1 4      | #Ac        | dd#     | Action[4,d]=s5              | 移进d        |
| 0 1 4 5    | #Acd       | d#      | Action[5,d]=r7,Goto(4,B)=8  | 用B->d规约   |
| 0 1 4 8    | #AcB       | d#      | Action[8,d]=s10             | 移进d        |
| 0 1 4 8 10 | #AcBd      | #       | Action[10,#]=r6,Goto(1,B)=6 | 用B->cBd规约 |
| 0 1        | #AB        | #       | Action[1,#]=acc             | 接受         |

