### 分页存储管理中若从取指令开始到成功执行如下指令：ox00401f00：load x，0x00405800（表示从虚拟地址0x800处取数据加载到x寄存器）可能会访问几次内存？是哪几次？说明：系统采用二级页表，根页表已在内存，页表在虚拟存储空间，系统有TLB、Cache高速缓存。

### 取指

从0x00401f00逻辑地址中取指令

- 如果TLB命中，直接生成物理地址
  - 如果cache命中，直接取得指令
  - 如果cache未命中，从内存中取得指令（访存一次）
- 如果TLB未命中，从根页表项得到页框号（访存一次），再从二级页表得到物理地址（访存一次）
  - 如果cache命中，直接取得指令
  - 如果cache未命中，从内存中取得指令(访存一次)

### 执行

从0x00405800逻辑地址中加载数据

- 如果0x00405800的页框号和0x00401f00的页框号相同，或者TLB中本来就有0x00405800的页框号，则TLB命中，直接生成物理地址
  - 如果cache命中，直接加载数据
  - 如果cache未命中，从内存中加载数据（访存一次）
- 否则，从根页表项得到页框号（访存一次），再从二级页表得到物理地址（访存一次）
  - 如果cache命中，直接加载数据
  - 如果cache未命中，从内存中加载数据（访存一次）

## 2.

### a.

**X**只会在一段空闲空间从头开始放置，而X的左边有1Mbyte的空闲空间，说明X左边原来有占用但是现在被替换出去了，这个替换出去的空间最大为左边的1Mbyte

### b.

X为2Mbyte，X左边的空间之前占用，右边的空闲空间为5Mbyte，故为7Mbyte

### c.

![image-20231022194729635](C:\Users\wxy43\AppData\Roaming\Typora\typora-user-images\image-20231022194729635.png)

## 3.

##### a.

页面为$2^{10}$byte，有$2^{16}$个页，固有$2^{10}*2^{16}=2^{26}$共26位逻辑地址

##### b.

页的大小为$2^{10}$byte，则页框和页的大小相同，也为$2^{10}$byte

##### c.

物理地址有32位，由b有页框号占10位，故用来确定页的有22位

##### d

由$2^{16}$页得共有$2^{16}$个页表项

##### e

每个页表项有22（c中用来确定页的有22位）+1（有效位）=23位

## 4.

a.段号0，段基址为660，段长度为248，由198<248，无段错误，物理地址：660+198=858

b.段号2，段基址为222，段长度为198，由156<248，无段错误，物理地址：222+156=378

c.段号1，段基址为1725，段长度为422，由530>248，段错误

d.段号3，段基址为996，段长度为604，由444<248，无段错误，物理地址：996+444=1440

e.段号0，段基址为660，段长度为248，由222<248，无段错误，物理地址：660+222=882

## 5.

a.由虚拟地址确定页号和偏移量，在页表中寻找页号对应的页表项，在对应的有效位为1的前提下得到页框号，最后根据页面的大小对页框号移位后+偏移量得到物理地址

b.

(i)虚拟页号=1052/1024=1,偏移量=1052%1024=28，1号页表项的页框号为7，则物理地址=1024*7+28=7196

(ii)虚拟页号=2221/1024=2,偏移量=2224%1024=28，1号页表项的页框号为7，则物理地址=1024*7+28=7196

(ii)虚拟页号=1052/1024=1,偏移量=1052%1024=28，1号页表项的页框号为7，则物理地址=1024*7+28=7196



## 5.

该进程的页表项共有





![image-20231023002247584](C:\Users\wxy43\AppData\Roaming\Typora\typora-user-images\image-20231023002247584.png)

